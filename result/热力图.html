<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=xK1KEl5txXo2cYSsaI5vDoMQZRynNgHq"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"></script>
    <title>热力图</title>
    <style type="text/css">
		ul,li{list-style: none;margin:0;padding:0;float:left;}
		html{height:100%}
		body{height:100%;margin:0px;padding:0px;font-family:"微软雅黑";}
		#container{height:500px;width:100%;}
		#r-result{width:100%;}
    </style>	
</head>
<body>
	<div id="container"></div>
	<div id="r-result">
		<input type="button"  onclick="openHeatmap();" value="显示热力图"/><input type="button"  onclick="closeHeatmap();" value="关闭热力图"/>
	</div>
</body>
</html>
<script type="text/javascript">
    var map = new BMap.Map("container");          // 创建地图实例

    var point = new BMap.Point(104.06, 30.67);
    map.centerAndZoom(point, 5);             // 初始化地图，设置中心点坐标和地图级别
    map.enableScrollWheelZoom(); // 允许滚轮缩放
  
    var points =
[{'lng': 109.52277128135884, 'lat': 18.257775914897483, 'count': 6}, {'lng': 117.64219393404412, 'lat': 26.270835279362192, 'count': 3}, {'lng': 111.1812620932674, 'lat': 34.783319941049726, 'count': 4}, {'lng': 121.48789948569473, 'lat': 31.24916171001514, 'count': 207}, {'lng': 117.95546387714894, 'lat': 28.457622553937274, 'count': 20}, {'lng': 113.76343399075655, 'lat': 23.043023815368237, 'count': 30}, {'lng': 118.61264305187912, 'lat': 37.408666288041196, 'count': 14}, {'lng': 105.19675419935521, 'lat': 37.52112419159455, 'count': 5}, {'lng': 121.67796628922625, 'lat': 38.900436431991984, 'count': 6}, {'lng': 111.53878759640808, 'lat': 36.09974544358536, 'count': 12}, {'lng': 118.34076823661057, 'lat': 35.07240907439113, 'count': 57}, {'lng': 100.09261291372643, 'lat': 23.887806103773013, 'count': 2}, {'lng': 124.33854311476908, 'lat': 40.1290228266375, 'count': 6}, {'lng': 119.92957584318849, 'lat': 28.4562995521443, 'count': 4}, {'lng': 100.22962839887937, 'lat': 26.875351089481363, 'count': 19}, {'lng': 113.11284639067514, 'lat': 41.02236294675116, 'count': 4}, {'lng': 106.83199909716231, 'lat': 39.683177006785236, 'count': 4}, {'lng': 87.56498774111579, 'lat': 43.84038034721766, 'count': 62}, {'lng': 103.76082423877176, 'lat': 29.600957611095073, 'count': 9}, {'lng': 115.99984802155373, 'lat': 29.71963952612237, 'count': 24}, {'lng': 112.05094595864539, 'lat': 22.937975685537467, 'count': 3}, {'lng': 115.78792824511814, 'lat': 33.87121056530193, 'count': 7}, {'lng': 128.9005796425911, 'lat': 47.741959238189104, 'count': 2}, {'lng': 113.1340256353934, 'lat': 23.035094840514382, 'count': 18}, {'lng': 130.28473458595482, 'lat': 46.813779604740354, 'count': 10}, {'lng': 115.49481016907626, 'lat': 38.88656454802744, 'count': 64}, {'lng': 99.17799561327821, 'lat': 25.120489196190352, 'count': 2}, {'lng': 114.0854909934702, 'lat': 32.128582307511664, 'count': 23}, {'lng': 84.92698963494786, 'lat': 45.20391924603892, 'count': 2}, {'lng': 116.50525268298414, 'lat': 31.75555835519844, 'count': 17}, {'lng': 104.85208676006856, 'lat': 26.59186606031868, 'count': 2}, {'lng': 103.8233054407292, 'lat': 36.06422552504259, 'count': 74}, {'lng': 105.07305599171474, 'lat': 29.599461534774647, 'count': 10}, {'lng': 109.84623853249181, 'lat': 40.64711942570857, 'count': 11}, {'lng': 116.39564503787867, 'lat': 39.92998577808024, 'count': 806}, {'lng': 109.12262791919323, 'lat': 21.472718235009687, 'count': 4}, {'lng': 110.80122891676038, 'lat': 32.636994339468124, 'count': 13}, {'lng': 118.77807440802562, 'lat': 32.05723550180587, 'count': 270}, {'lng': 106.10555398379239, 'lat': 30.800965168237234, 'count': 17}, {'lng': 108.29723355586638, 'lat': 22.80649293560261, 'count': 27}, {'lng': 118.18188294866125, 'lat': 26.643626474197838, 'count': 7}, {'lng': 115.89352754583604, 'lat': 28.689578000141147, 'count': 87}, {'lng': 120.87380095093022, 'lat': 32.014664540823446, 'count': 29}, {'lng': 112.5428419005123, 'lat': 33.0114195691165, 'count': 19}, {'lng': 118.10388604566381, 'lat': 24.489230612469232, 'count': 46}, {'lng': 131.1714017395816, 'lat': 46.65510206248248, 'count': 1}, {'lng': 121.42171529922942, 'lat': 31.206748720157083, 'count': 12}, {'lng': 121.44061293593727, 'lat': 28.668283285674367, 'count': 30}, {'lng': 117.28269909168304, 'lat': 31.86694226068694, 'count': 142}, {'lng': 114.99203871092017, 'lat': 27.113847650157084, 'count': 13}, {'lng': 126.56454398883335, 'lat': 43.87198833435933, 'count': 30}, {'lng': 111.14315660234801, 'lat': 37.52731609696258, 'count': 4}, {'lng': 106.20825419850944, 'lat': 37.99356100293566, 'count': 2}, {'lng': 114.65410194229541, 'lat': 33.62374081814082, 'count': 14}, {'lng': 119.76082179399947, 'lat': 49.201636054604336, 'count': 11}, {'lng': 111.6603505200542, 'lat': 40.828318873081585, 'count': 50}, {'lng': 114.30006059206065, 'lat': 29.88065675772815, 'count': 4}, {'lng': 108.70750927819563, 'lat': 34.34537299599856, 'count': 32}, {'lng': 126.65771685544611, 'lat': 45.7732246332393, 'count': 92}, {'lng': 118.18345059773411, 'lat': 39.6505309225366, 'count': 37}, {'lng': 115.64188568785016, 'lat': 34.43858864024636, 'count': 24}, {'lng': 109.93420815379513, 'lat': 33.87390739508516, 'count': 1}, {'lng': 120.76042769895746, 'lat': 30.77399223958183, 'count': 20}, {'lng': 98.281634585257, 'lat': 39.80239732673353, 'count': 2}, {'lng': 124.39138207367984, 'lat': 43.17552470112557, 'count': 3}, {'lng': 106.28526799598252, 'lat': 36.02152348070926, 'count': 5}, {'lng': 118.53225032938248, 'lat': 24.62102388930003, 'count': 1}, {'lng': 124.6990773926766, 'lat': 46.07005100166291, 'count': 14}, {'lng': 125.02183973021087, 'lat': 46.596709020007594, 'count': 15}, {'lng': 121.59347778143518, 'lat': 38.94870993830429, 'count': 72}, {'lng': 105.73693162285642, 'lat': 34.58431941886869, 'count': 17}, {'lng': 117.21081309155257, 'lat': 39.143929903310074, 'count': 141}, {'lng': 113.12623048764767, 'lat': 30.649047356422365, 'count': 2}, {'lng': 112.5508635890553, 'lat': 37.89027705396754, 'count': 67}, {'lng': 122.09395836580605, 'lat': 37.52878708125143, 'count': 14}, {'lng': 111.99639635657, 'lat': 27.741073302349072, 'count': 3}, {'lng': 113.93573439207124, 'lat': 30.927954784200963, 'count': 12}, {'lng': 119.54208214971854, 'lat': 26.656527419158913, 'count': 5}, {'lng': 121.57900597258933, 'lat': 29.885258965918055, 'count': 65}, {'lng': 117.0587387721073, 'lat': 30.537897817381097, 'count': 40}, {'lng': 109.03804456347515, 'lat': 32.70437044999437, 'count': 10}, {'lng': 114.35180650767198, 'lat': 36.1102667221811, 'count': 19}, {'lng': 105.92826996575766, 'lat': 26.228594577737493, 'count': 1}, {'lng': 104.62663760066474, 'lat': 35.586056241828416, 'count': 10}, {'lng': 104.63301906152529, 'lat': 28.76967479626591, 'count': 11}, {'lng': 111.31098109196083, 'lat': 30.73275781802591, 'count': 17}, {'lng': 114.40003867155777, 'lat': 27.811129895842885, 'count': 12}, {'lng': 107.17064545238307, 'lat': 34.36408080974784, 'count': 13}, {'lng': 118.75209631098257, 'lat': 30.951642354295757, 'count': 16}, {'lng': 116.9886924118307, 'lat': 33.63677238578078, 'count': 12}, {'lng': 118.29689337855334, 'lat': 33.95204973370865, 'count': 10}, {'lng': 113.14619551911636, 'lat': 29.378007075474304, 'count': 20}, {'lng': 107.35732203836824, 'lat': 22.415455296546437, 'count': 1}, {'lng': 117.88049041703327, 'lat': 31.608732547545824, 'count': 1}, {'lng': 106.75791584175442, 'lat': 31.869189159159983, 'count': 10}, {'lng': 107.42380671968002, 'lat': 40.76917990242912, 'count': 3}, {'lng': 119.98186101345706, 'lat': 31.771396744684242, 'count': 40}, {'lng': 111.65371813684197, 'lat': 29.012148855180815, 'count': 19}, {'lng': 106.68891115654719, 'lat': 35.550110190016646, 'count': 7}, {'lng': 113.30084897797529, 'lat': 33.74530145652439, 'count': 21}, {'lng': 105.81968693999652, 'lat': 32.441040158428244, 'count': 5}, {'lng': 106.75891196362113, 'lat': 30.59924998719945, 'count': 6}, {'lng': 113.30764967515182, 'lat': 23.12004910207623, 'count': 179}, {'lng': 107.6442270867326, 'lat': 35.72680075452996, 'count': 7}, {'lng': 116.70360222263986, 'lat': 39.51861062508462, 'count': 35}, {'lng': 109.50050975696925, 'lat': 36.60332035226031, 'count': 2}, {'lng': 114.35164211776365, 'lat': 34.80185417583674, 'count': 26}, {'lng': 114.89378153032918, 'lat': 40.81118849110306, 'count': 20}, {'lng': 110.4816201569677, 'lat': 29.124889353219793, 'count': 2}, {'lng': 100.45989186892419, 'lat': 38.93932029698206, 'count': 2}, {'lng': 117.18810662317686, 'lat': 34.27155343109188, 'count': 45}, {'lng': 116.32816136356094, 'lat': 37.46082592630501, 'count': 16}, {'lng': 104.40239781824484, 'lat': 31.131139652701417, 'count': 17}, {'lng': 112.72793882880985, 'lat': 38.46103057295889, 'count': 10}, {'lng': 109.9869587958539, 'lat': 27.557482901172786, 'count': 12}, {'lng': 114.41065807997101, 'lat': 23.11353985240842, 'count': 20}, {'lng': 104.06792346330406, 'lat': 30.679942845419564, 'count': 283}, {'lng': 119.42777755116975, 'lat': 32.40850525456844, 'count': 24}, {'lng': 117.93382245583847, 'lat': 40.992521052457136, 'count': 24}, {'lng': 116.36091886693136, 'lat': 27.954545170269935, 'count': 12}, {'lng': 123.92981976705381, 'lat': 41.8773038295909, 'count': 4}, {'lng': 91.11189089598402, 'lat': 29.662557062056536, 'count': 11}, {'lng': 116.37950085538243, 'lat': 23.547999466926136, 'count': 7}, {'lng': 101.72242315249032, 'lat': 26.587571257108653, 'count': 2}, {'lng': 110.78090944498922, 'lat': 19.750947380144982, 'count': 1}, {'lng': 113.91269016082377, 'lat': 35.3072575576613, 'count': 33}, {'lng': 114.9471174167892, 'lat': 27.82232155862896, 'count': 6}, {'lng': 120.30545590053595, 'lat': 31.57003745192303, 'count': 40}, {'lng': 119.50717994299387, 'lat': 35.42022519314436, 'count': 25}, {'lng': 102.71460113878045, 'lat': 25.049153100453157, 'count': 109}, {'lng': 103.72502065573349, 'lat': 27.340632963635457, 'count': 7}, {'lng': 112.73851439991773, 'lat': 37.69336152679759, 'count': 11}, {'lng': 112.86733275750684, 'lat': 35.49983446722556, 'count': 11}, {'lng': 100.98005773013449, 'lat': 22.78877778014943, 'count': 5}, {'lng': 117.18652262527252, 'lat': 29.303562768448288, 'count': 6}, {'lng': 103.78253888802674, 'lat': 25.520758142870502, 'count': 6}, {'lng': 112.47992772666272, 'lat': 39.33767196622064, 'count': 2}, {'lng': 116.52169489108084, 'lat': 39.95895316640668, 'count': 5}, {'lng': 123.77806236979248, 'lat': 41.32583762664885, 'count': 7}, {'lng': 109.23181650474223, 'lat': 23.741165926514817, 'count': 1}, {'lng': 120.2193754157201, 'lat': 30.259244461536102, 'count': 139}, {'lng': 124.83299453234117, 'lat': 45.136048970084005, 'count': 4}, {'lng': 117.27930538329689, 'lat': 34.80788307838604, 'count': 21}, {'lng': 109.42240181015114, 'lat': 24.329053352467223, 'count': 9}, {'lng': 113.13169534107074, 'lat': 27.82743292766265, 'count': 21}, {'lng': 110.26092014748276, 'lat': 25.262901245955238, 'count': 13}, {'lng': 116.12640309836864, 'lat': 24.30457060603053, 'count': 8}, {'lng': 111.30547195007331, 'lat': 23.485394636734455, 'count': 3}, {'lng': 109.74592574432862, 'lat': 38.279439240070595, 'count': 8}, {'lng': 102.64014734336779, 'lat': 37.933172142905626, 'count': 3}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': 223}, {'lng': 111.61464768615666, 'lat': 26.435971646759207, 'count': 7}, {'lng': 107.04547762872542, 'lat': 33.08156897815767, 'count': 13}, {'lng': 116.72865028834109, 'lat': 23.383908453269196, 'count': 16}, {'lng': 115.3729242893998, 'lat': 22.77873050016389, 'count': 12}, {'lng': 113.07812534115365, 'lat': 22.57511678345104, 'count': 8}, {'lng': 117.49447677159357, 'lat': 30.660019248160626, 'count': 6}, {'lng': 123.43279092160505, 'lat': 41.808644783515746, 'count': 90}, {'lng': 116.86380647644208, 'lat': 38.297615350325714, 'count': 28}, {'lng': 108.06994770936778, 'lat': 24.699520782873197, 'count': 4}, {'lng': 114.71372147587483, 'lat': 23.757250850469006, 'count': 4}, {'lng': 118.60036234322938, 'lat': 24.901652383991102, 'count': 19}, {'lng': 117.08941491713698, 'lat': 36.18807775894815, 'count': 32}, {'lng': 119.91960601619071, 'lat': 32.47605327483028, 'count': 11}, {'lng': 105.44397028920636, 'lat': 28.895929803860103, 'count': 17}, {'lng': 112.44752476895121, 'lat': 34.65736781765111, 'count': 48}, {'lng': 117.02496706629023, 'lat': 36.68278472716141, 'count': 162}, {'lng': 116.60079762482256, 'lat': 35.40212166433135, 'count': 40}, {'lng': 112.40383005708094, 'lat': 35.09389309450756, 'count': 2}, {'lng': 110.3308018483363, 'lat': 20.022071276952243, 'count': 21}, {'lng': 118.05913427786938, 'lat': 36.80468485421204, 'count': 32}, {'lng': 116.79144742863005, 'lat': 33.96002330536412, 'count': 8}, {'lng': 117.01863886329463, 'lat': 32.64281182374795, 'count': 15}, {'lng': 119.31329513263806, 'lat': 33.52834896694177, 'count': 12}, {'lng': 114.0259736573215, 'lat': 22.546053546205247, 'count': 173}, {'lng': 113.04077334890835, 'lat': 23.698468550422163, 'count': 9}, {'lng': 120.6906347337091, 'lat': 28.002837594041246, 'count': 34}, {'lng': 109.48393269657977, 'lat': 34.5023579758288, 'count': 12}, {'lng': 120.13724316328172, 'lat': 30.877925155690896, 'count': 16}, {'lng': 112.93555563303435, 'lat': 27.83509505297878, 'count': 15}, {'lng': 110.36506726285033, 'lat': 21.257463103764316, 'count': 11}, {'lng': 118.32457035097686, 'lat': 32.31735059538377, 'count': 12}, {'lng': 117.96829241452845, 'lat': 37.405313941825895, 'count': 11}, {'lng': 114.04606140022909, 'lat': 33.57627868848315, 'count': 13}, {'lng': 117.67620467894616, 'lat': 24.517064779808482, 'count': 9}, {'lng': 119.14263382297052, 'lat': 36.71611487305138, 'count': 54}, {'lng': 112.76876801685833, 'lat': 30.34311579260133, 'count': 2}, {'lng': 116.63007599086392, 'lat': 23.661811676516503, 'count': 5}, {'lng': 115.02662744067226, 'lat': 35.75329788820758, 'count': 17}, {'lng': 121.30955503008511, 'lat': 37.53656156285964, 'count': 43}, {'lng': 113.21183588499157, 'lat': 35.234607554985935, 'count': 16}, {'lng': 129.608035395637, 'lat': 44.58852115278252, 'count': 10}, {'lng': 110.15167631614493, 'lat': 22.643973608377276, 'count': 3}, {'lng': 102.54506789248256, 'lat': 24.370447134438425, 'count': 6}, {'lng': 113.56244702618993, 'lat': 22.25691464612574, 'count': 13}, {'lng': 122.84077667910014, 'lat': 45.621086275218886, 'count': 2}, {'lng': 126.43579767534614, 'lat': 41.94585939701795, 'count': 7}, {'lng': 104.20564932849953, 'lat': 36.501821828710106, 'count': 5}, {'lng': 106.63182140365117, 'lat': 23.901512367910115, 'count': 2}, {'lng': 112.36654664522563, 'lat': 28.58808777988717, 'count': 8}, {'lng': 120.14887181793894, 'lat': 33.379861877120995, 'count': 22}, {'lng': 122.07322781023007, 'lat': 41.14124802295616, 'count': 10}, {'lng': 103.84142956286796, 'lat': 30.06111507994454, 'count': 2}, {'lng': 106.37933720152914, 'lat': 39.02022328360303, 'count': 2}, {'lng': 114.52208184420766, 'lat': 38.048958314615454, 'count': 115}, {'lng': 86.04186492219485, 'lat': 44.308258980430466, 'count': 2}, {'lng': 119.33022110712668, 'lat': 26.04712549657293, 'count': 71}, {'lng': 119.6043676161184, 'lat': 39.945461565897574, 'count': 26}, {'lng': 120.59246738555154, 'lat': 30.00236458052847, 'count': 14}, {'lng': 126.98909457163498, 'lat': 46.64606392699692, 'count': 10}, {'lng': 104.70551897529307, 'lat': 31.50470125806144, 'count': 18}, {'lng': 115.98686913929107, 'lat': 36.455828514727976, 'count': 15}, {'lng': 112.4796533699162, 'lat': 23.078663282928925, 'count': 8}, {'lng': 104.77607133936438, 'lat': 29.359156889475667, 'count': 12}, {'lng': 122.1698720983516, 'lat': 30.036010302553937, 'count': 6}, {'lng': 118.38410842322828, 'lat': 31.36601978754301, 'count': 29}, {'lng': 120.61990711548988, 'lat': 31.317987367952437, 'count': 91}, {'lng': 110.93124533067585, 'lat': 21.66822571882161, 'count': 5}, {'lng': 112.09985718064648, 'lat': 30.396103360852894, 'count': 7}, {'lng': 112.21733029896677, 'lat': 31.04261120294864, 'count': 5}, {'lng': 119.07773096395962, 'lat': 25.448450136734262, 'count': 6}, {'lng': 117.68466691247161, 'lat': 36.23365413364694, 'count': 6}, {'lng': 115.46335977452752, 'lat': 35.26244049607468, 'count': 24}, {'lng': 113.85991703300718, 'lat': 27.639544222952306, 'count': 4}, {'lng': 122.23339137079269, 'lat': 40.66865106647352, 'count': 8}, {'lng': 120.86075764475588, 'lat': 40.743029881317504, 'count': 7}, {'lng': 117.35707986587582, 'lat': 32.92949890669797, 'count': 17}, {'lng': 115.68622865290865, 'lat': 37.74692904585666, 'count': 20}, {'lng': 112.58381881071617, 'lat': 26.89816441535812, 'count': 21}, {'lng': 118.87584165150854, 'lat': 28.95691044753569, 'count': 4}, {'lng': 112.17632579650555, 'lat': 32.094933645820944, 'count': 7}, {'lng': 101.76792098980276, 'lat': 36.640738611957964, 'count': 34}, {'lng': 125.15014857862096, 'lat': 42.98636494637781, 'count': 309}, {'lng': 113.8353124597886, 'lat': 34.026739588655204, 'count': 19}, {'lng': 109.61370755657885, 'lat': 23.10337316440881, 'count': 3}, {'lng': 106.7091770961758, 'lat': 26.62990674144093, 'count': 46}, {'lng': 111.5525941788367, 'lat': 24.41105354711281, 'count': 2}, {'lng': 112.34312135278857, 'lat': 28.69406942889747, 'count': 3}, {'lng': 114.9359090792838, 'lat': 25.84529553634676, 'count': 38}, {'lng': 118.9307611921676, 'lat': 42.297112320317325, 'count': 19}, {'lng': 125.13368605218399, 'lat': 42.923302619053665, 'count': 4}, {'lng': 123.17245120514733, 'lat': 41.27333926556943, 'count': 8}, {'lng': 107.49497344658866, 'lat': 31.214198858944734, 'count': 13}, {'lng': 111.00685365308033, 'lat': 35.03885947981193, 'count': 10}, {'lng': 119.17387221741889, 'lat': 34.60154896700999, 'count': 20}, {'lng': 125.94265013851434, 'lat': 41.73639712986761, 'count': 5}, {'lng': 122.26036326322144, 'lat': 43.633756072995986, 'count': 11}, {'lng': 105.56488779226322, 'lat': 30.55749135037996, 'count': 5}, {'lng': 106.93126031648453, 'lat': 27.699961377076246, 'count': 15}, {'lng': 114.52048681294414, 'lat': 37.069531196911996, 'count': 24}, {'lng': 114.4826939323422, 'lat': 36.60930792847117, 'count': 28}, {'lng': 111.46152540355403, 'lat': 27.236811244922414, 'count': 12}, {'lng': 113.64964384986449, 'lat': 34.756610064140254, 'count': 218}, {'lng': 113.03770446779562, 'lat': 25.782263975738925, 'count': 13}, {'lng': 109.99370625145134, 'lat': 39.81648956060153, 'count': 12}, {'lng': 114.89559404135665, 'lat': 30.384439322752247, 'count': 1}, {'lng': 98.50841450616744, 'lat': 39.74147376815896, 'count': 6}, {'lng': 106.53063501341296, 'lat': 29.54460610888615, 'count': 183}, {'lng': 119.65257570368145, 'lat': 29.10289910539069, 'count': 17}, {'lng': 102.20812626259014, 'lat': 38.51607179953174, 'count': 1}, {'lng': 108.6387980564235, 'lat': 21.973350465312727, 'count': 4}, {'lng': 123.85484961461594, 'lat': 42.29975701212545, 'count': 3}, {'lng': 108.96806701340064, 'lat': 34.90836769638356, 'count': 2}, {'lng': 117.81942872880637, 'lat': 30.940929694665662, 'count': 6}, {'lng': 106.2064786078384, 'lat': 38.50262101187604, 'count': 49}, {'lng': 121.14774873823639, 'lat': 41.13087887591732, 'count': 11}, {'lng': 119.45583540512952, 'lat': 32.20440944359928, 'count': 8}, {'lng': 125.31364242720072, 'lat': 43.89833760709784, 'count': 63}, {'lng': 112.9793527876505, 'lat': 28.21347823085322, 'count': 152}, {'lng': 113.12029208572514, 'lat': 36.20166438574343, 'count': 14}, {'lng': 121.66082212856833, 'lat': 42.01925010706022, 'count': 7}, {'lng': 115.82093225904637, 'lat': 32.90121133056961, 'count': 23}, {'lng': 108.35179115286083, 'lat': 21.61739847047181, 'count': 2}, {'lng': 111.97700975587391, 'lat': 21.87151730451877, 'count': 5}, {'lng': 113.56923760163296, 'lat': 37.86952949322259, 'count': 2}, {'lng': 104.9345734057548, 'lat': 33.39447997293795, 'count': 10}, {'lng': 113.37935836429192, 'lat': 31.717857608188574, 'count': 4}, {'lng': 103.00935646634746, 'lat': 29.999716337065788, 'count': 6}, {'lng': 120.38442818368189, 'lat': 36.10521490127382, 'count': 126}, {'lng': 123.0077633288837, 'lat': 41.118743682153465, 'count': 6}, {'lng': 113.5944611074356, 'lat': 24.80296031189189, 'count': 8}, {'lng': 118.515881846623, 'lat': 31.688528158880025, 'count': 11}, {'lng': 114.04915354745555, 'lat': 32.98315815409348, 'count': 18}, {'lng': 114.29349244944063, 'lat': 30.607022895804395, 'count': 1}, {'lng': 130.94176727325066, 'lat': 45.32153988655108, 'count': 3}, {'lng': 114.29776983802476, 'lat': 35.75542587422399, 'count': 9}, {'lng': 130.29247205063453, 'lat': 47.33866590372683, 'count': 4}, {'lng': 117.03545018601243, 'lat': 28.241309597181967, 'count': 2}, {'lng': 114.9066180465751, 'lat': 30.446108937901133, 'count': 16}, {'lng': 118.07754612726298, 'lat': 30.277745895120198, 'count': 8}, {'lng': 115.05068316392396, 'lat': 30.21612712771406, 'count': 12}, {'lng': 127.50083029523519, 'lat': 50.250690090738274, 'count': 2}, {'lng': 123.9872889421725, 'lat': 47.34769981336638, 'count': 20}, {'lng': 117.01799673877318, 'lat': 25.07868543351518, 'count': 6}]

   
    if(!isSupportCanvas()){
    	alert('热力图目前只支持有canvas支持的浏览器,您所使用的浏览器不能使用热力图功能~')
    }
	//详细的参数,可以查看heatmap.js的文档 https://github.com/pa7/heatmap.js/blob/master/README.md
	//参数说明如下:
	/* visible 热力图是否显示,默认为true
     * opacity 热力的透明度,1-100
     * radius 势力图的每个点的半径大小   
     * gradient  {JSON} 热力图的渐变区间 . gradient如下所示
     *	{
			.2:'rgb(0, 255, 255)',
			.5:'rgb(0, 110, 255)',
			.8:'rgb(100, 0, 255)'
		}
		其中 key 表示插值的位置, 0~1. 
		    value 为颜色值. 
     */
	heatmapOverlay = new BMapLib.HeatmapOverlay({"radius":20});
	map.addOverlay(heatmapOverlay);
	heatmapOverlay.setDataSet({data:points,max:100});
	//是否显示热力图
    function openHeatmap(){
        heatmapOverlay.show();
    }
	function closeHeatmap(){
        heatmapOverlay.hide();
    }
	closeHeatmap();
    function setGradient(){
     	/*格式如下所示:
		{
	  		0:'rgb(102, 255, 0)',
	 	 	.5:'rgb(255, 170, 0)',
		  	1:'rgb(255, 0, 0)'
		}*/
     	var gradient = {};
     	var colors = document.querySelectorAll("input[type='color']");
     	colors = [].slice.call(colors,0);
     	colors.forEach(function(ele){
			gradient[ele.getAttribute("data-key")] = ele.value; 
     	});
        heatmapOverlay.setOptions({"gradient":gradient});
    }
	//判断浏览区是否支持canvas
    function isSupportCanvas(){
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    }
</script>